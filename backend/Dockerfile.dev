FROM guergeiro/pnpm:18-8 as cache
WORKDIR /usr/src/app
COPY pnpm-lock.yaml .
RUN pnpm fetch
ADD . ./
RUN pnpm install --prefer-offline
RUN rm -rdf frontend
RUN rm -rdf tools
WORKDIR /usr/src/app/backend
CMD pnpm dev
